#!/bin/bash

mkdir -p bundle/android && NODE_OPTIONS=--max_old_space_size=8192 react-native bundle --platform android --dev false --entry-file index.android.js --assets-dest android/app/src/main/res --bundle-output bundle/android/App.text.js --sourcemap-output android/app/src/main/assets/index.android.bundle.map && ./node_modules/hermes-engine/`node -e \"const platform=require('os').platform();console.log(platform === 'darwin' ? 'osx-bin' : (platform === 'linux' ? 'linux64-bin' : (platform === 'win32' ? 'win64-bin' : 'unsupported-os')));\"`/hermesc -emit-binary -O -out android/app/src/main/assets/index.android.bundle bundle/android/App.text.js -output-source-map